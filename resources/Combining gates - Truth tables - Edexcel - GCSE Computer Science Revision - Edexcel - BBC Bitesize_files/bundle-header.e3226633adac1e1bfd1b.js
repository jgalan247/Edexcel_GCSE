"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[6608],{51549:(e,t,r)=>{r.r(t),r.d(t,{default:()=>s});var n=r(12180);function a(e,t,r,n,a,o,i){try{var l=e[o](i),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(n,a)}const o=function(){var e,t=(e=function*(e,t,r){var{urn:a,resourceType:o,isSignedIn:i}=e,{fablRequest:l}=t,c="favourite"===r?"favourited":"followed";return i?l("favourite",{resourceDomain:"learning",resourceType:o,resourceId:a,action:r},{personalisationEnabled:!0}).then((e=>{var{data:t}=e;return t})).catch((e=>(n.z3("Error fetching article/guide ".concat(c," status - ").concat(e)),{[c]:!1}))):{[c]:!1}},function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function l(e){a(i,n,o,l,c,"next",e)}function c(e){a(i,n,o,l,c,"throw",e)}l(void 0)}))});return function(e,r,n){return t.apply(this,arguments)}}();function i(e,t,r,n,a,o,i){try{var l=e[o](i),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(n,a)}var l=e=>e.filter((e=>e.selected)),c=(e,t)=>{var{data:r}=e,{urlToExclude:n}=t;return r?(e=>{var{primary:t,secondary:r}=e;return[...t&&l(t),...r&&l(r)].filter(Boolean)})(r).filter((e=>e.link!==n)).map((e=>({label:e.title,url:e.link}))):[]};const s={productNavigation:function(){var e,t=(e=function*(e,t){var{fablRequest:r}=t;return r("product-navigation",{assetUri:e.assetUri,service:e.productNavigationFetcherService,language:e.language,country:e.country,usePreviewData:e.usePreviewData}).then((t=>{return r=t,n={urlToExclude:e.urlToExclude},{metadataItems:(a=c(r,n)).length>0?a:null};var r,n,a})).catch((e=>(n.z3("Error fetching and transforming product-navigation data to metadataItems - ".concat(e)),null)))},function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function l(e){i(o,n,a,l,c,"next",e)}function c(e){i(o,n,a,l,c,"throw",e)}l(void 0)}))});return function(e,r){return t.apply(this,arguments)}}(),action:o}},90284:(e,t,r)=>{r.r(t),r.d(t,{default:()=>G});var n=r(63696),a=r(707),o=r(39923),i=r(46802),l=r(83051),c=r(74437),s=r(53741),u=r(27813),d=r(63548),v=r(34576),m=r(9519),p=r(49565),y=r(65094),f={enabled:{key:"enabled",selected:!1,visuallyHiddenText:"",emphasis:"medium",iconType:"personalisation:bookmark"},enabledHover:{key:"enabledHover",selected:!1,visuallyHiddenText:"",emphasis:"medium",iconType:"personalisation:bookmark"},enabledActive:{key:"enabledActive",selected:!1,visuallyHiddenText:" in progress",emphasis:"medium",iconType:"playback-avkx:loading"},success:{key:"success",selected:!1,visuallyHiddenText:"",emphasis:"high",iconType:"personalisation:bookmark-filled"},successActive:{key:"successActive",selected:!1,visuallyHiddenText:" in progress",emphasis:"medium",iconType:"playback-avkx:loading"},successHover:{key:"successHover",selected:!1,visuallyHiddenText:"",emphasis:"medium",iconType:"actions:close"},signedOut:{key:"signedOut",selected:!1,visuallyHiddenText:"",emphasis:"medium",iconType:"personalisation:bookmark"}},h=r(66328);function b(e,t,r,n,a,o,i){try{var l=e[o](i),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(n,a)}const g=e=>{var{env:t,globalId:r,action:a,activityType:o,onComplete:i}=e,[l,c]=(0,n.useState)(!1);(0,n.useEffect)((()=>{if((0,p.A)()&&!l){var{getByGlobalId:e}=(0,h.R2)({env:t,activityType:o});!function(){var t,n=(t=function*(){var t=yield e(r);t&&t.action===a?i(!0):i(!1),c(!0)},function(){var e=this,r=arguments;return new Promise((function(n,a){var o=t.apply(e,r);function i(e){b(o,n,a,i,l,"next",e)}function l(e){b(o,n,a,i,l,"throw",e)}i(void 0)}))});return function(){return n.apply(this,arguments)}}()()}}),[a,o,r,t,i,l])};var T=r(20641),k=r(11545),w=r(468),x=(0,l.default)("a",{target:"e1cpikhi2",label:"StyledLink"})(T.NP," ",k.K1," color:",(e=>{var{theme:t}=e;return t.colourPalette.primary}),";&:hover,&:focus{text-decoration:underline;color:",(e=>{var{theme:t}=e;return t.colourPalette.hyperlink}),";}&:visited{color:",(e=>{var{theme:t}=e;return t.colourPalette.secondary}),";&:hover,&:focus{color:",(e=>{var{theme:t}=e;return t.colourPalette.hyperlink}),";}}"),O=(0,l.default)("div",{target:"e1cpikhi1",label:"StyledContent"})(k.K1," white-space:pre-line;"),P=(0,l.default)("div",{target:"e1cpikhi0",label:"MobileFullWidthWrapper"})("width:100%;@media (min-width: ",(0,w.A)(431),"){width:auto;}"),j=r(62540);function S(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function I(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?S(Object(r),!0).forEach((function(t){A(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function A(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const H=e=>{var{env:t,resourceId:r,resourceType:a,setSignInPrompt:o,labels:i,trackingLabels:l,zid:c,accentTheme:s}=e,h=((e,t,r)=>Object.entries(e).reduce(((e,n)=>{var[a,o]=n;return e[a]=I(I({},o),{},{text:t[a]}),r&&r[a]&&(e[a].tracking=r[a]),e}),{}))(f,i,l),b={activityType:"favourites",resourceDomain:"learning",resourceType:a,resourceId:r},[T,k]=(0,n.useState)((0,p.A)()?h.enabled.key:h.signedOut.key);g({env:t,globalId:(0,m.A)({resourceId:r,resourceType:a,resourceDomain:"learning"}),activityType:"favourites",action:"favourited",onComplete:e=>k(e?h.success.key:h.enabled.key)});var w=(0,d.D9)({groupName:"header",itemType:"toggle",itemName:"favourite button",itemResourceId:c,headline:null==l?void 0:l[T]}),x=(0,u.u)();return(0,j.jsx)(P,{children:(0,j.jsx)(v.A,{on:s,children:(0,j.jsx)(y.A,{"data-testid":"favouriteButton",states:h,initialState:T,activityConfig:b,setSignInPrompt:o,env:t,tracking:w,panelTheme:x,onSuccess:()=>!1,useFullWidth:!0})})})};var L={enabled:{key:"enabled",selected:!1,visuallyHiddenText:"",emphasis:"medium",iconType:"actions:add",text:"follow"},enabledHover:{key:"enabledHover",selected:!1,visuallyHiddenText:"",emphasis:"medium",iconType:"actions:add",text:"follow"},enabledActive:{key:"enabledActive",selected:!1,visuallyHiddenText:" in progress",emphasis:"medium",iconType:"playback-avkx:loading"},success:{key:"success",selected:!1,visuallyHiddenText:"",emphasis:"high",iconType:"actions:confirm"},successActive:{key:"successActive",selected:!1,visuallyHiddenText:" in progress",emphasis:"medium",iconType:"playback-avkx:loading"},successHover:{key:"successHover",selected:!1,visuallyHiddenText:"",emphasis:"medium",iconType:"actions:close"},signedOut:{key:"signedOut",selected:!1,visuallyHiddenText:"",emphasis:"medium",iconType:"actions:add",text:"follow"}};function D(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function E(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?D(Object(r),!0).forEach((function(t){C(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):D(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function C(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const B=e=>{var{env:t,resourceId:r,resourceType:a,setSignInPrompt:o,labels:i,trackingLabels:l,zid:c,infoPanel:s,label:m,accentTheme:f}=e,h=((e,t,r)=>Object.entries(e).reduce(((e,n)=>{var[a,o]=n;return e[a]=E(E({},o),{},{text:t[a]}),r&&r[a]&&(e[a].tracking=r[a]),e}),{}))(L,i,l),b={activityType:"follows",resourceDomain:"learning",resourceType:a,resourceId:r},T=null==s?void 0:s.infoPanelTitle.replace("{label}",m),k=(e=>{if(!e)return null;var{followedContentText:t,followedContentURL:r,followedContentLinkText:n}=e;return(0,j.jsxs)(O,{children:[t," ",(0,j.jsx)(x,{href:r,children:n}),"."]})})(s),w=(0,d.D9)({groupName:"header",itemType:"toggle",itemName:"follow button",itemResourceId:c}),S=(0,u.u)(),[I,A]=(0,n.useState)((0,p.A)()?h.enabled.key:h.signedOut.key);return g({env:t,globalId:"urn:bbc:learning:".concat(a,":").concat(r),activityType:"follows",action:"followed",onComplete:e=>A(e?h.success.key:h.enabled.key)}),(0,j.jsx)(P,{children:(0,j.jsx)(v.A,{on:f,children:(0,j.jsx)(y.A,{"data-testid":"followButton",states:h,initialState:I,activityConfig:b,setSignInPrompt:o,env:t,panelTitle:T,panelContent:k,panelTheme:S,tracking:w,useFullWidth:!0})})})};var _=r(99941);const z=e=>{var{accentTheme:t}=e;return(0,j.jsx)(v.A,{on:t,children:(0,j.jsx)(_.A,{mode:"standard",horizontalAlignment:"left",buttonEmphasis:"medium",expanded:!1})})};var F=(0,l.default)("div",{target:"e1tkm4570",label:"ButtonGroup"})("margin-top:",c.SPACING_6,";");const N=e=>{var{env:t,resourceType:r,resourceId:n,favourited:a,followed:o,setSignInPrompt:i,actionButton:l={},infoPanel:c,headline:u,zid:d,accentTheme:v,showShareTool:m}=e,p=[];m&&p.push((0,j.jsx)(z,{accentTheme:v},"share-".concat(d)));var{favourite:y,follow:f,trackingLabels:h}=l;return y&&Object.keys(y).length&&p.push((0,j.jsx)(H,{env:t,resourceType:r,resourceId:n,status:a,setSignInPrompt:i,labels:y,userAction:"favourite",zid:d,trackingLabels:h,accentTheme:v},"favourite-".concat(d))),f&&Object.keys(f).length&&p.push((0,j.jsx)(B,{env:t,resourceType:r,resourceId:n,status:o,setSignInPrompt:i,labels:f,userAction:"follow",zid:d,trackingLabels:h,infoPanel:c,label:u,accentTheme:v},"follow-".concat(d))),p.length?(0,j.jsx)(F,{children:(0,j.jsx)(s.A,{spacing:4,children:p})}):null};var W=["data","error","subheadingFontScale","summaryFontScale","resourceType","urn","env","setSignInPrompt","headlineType"];const G=e=>{var{data:t,error:r,subheadingFontScale:l="indexHeadlineMedium",summaryFontScale:c="indexHeadlineSmall",resourceType:s,urn:u,env:d,setSignInPrompt:v,headlineType:m="normal"}=e,p=function(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(e,W),{headline:y,subheading:f,summary:h,backgroundImage:b,metadataLabel:g,metadataItems:T,backgroundColour:k,headerBottomMargin:w,contextLabels:x,favourited:O,followed:P,shouldWrap:S,actionButton:I,zid:A,infoPanel:H,mode:L,showShareTool:D,withGradient:E}=(e=>{var t,{data:r,props:{headline:n,subheading:a,summary:o,backgroundImage:i,metadataLabel:l,metadataItems:c,phase:s,backgroundColour:u,headerBottomMargin:d=!1,contextLabels:v,shouldWrap:m=!1,actionButton:p,zid:y,infoPanel:f,mode:h,showShareTool:b,withGradient:g=!1}}=e;return{headline:n||(null==r?void 0:r.headline),subheading:a,summary:(null==o?void 0:o.trim())||(null==r||null===(t=r.summary)||void 0===t?void 0:t.trim()),backgroundImage:i||(null==r?void 0:r.backgroundImage),metadataLabel:l,metadataItems:c||(null==r?void 0:r.metadataItems),phase:s,backgroundColour:u,headerBottomMargin:d,contextLabels:v||(null==r?void 0:r.contextLabels),favourited:null==r?void 0:r.favourited,followed:null==r?void 0:r.followed,shouldWrap:m,actionButton:p,zid:y,infoPanel:f,mode:h,showShareTool:b,withGradient:g}})({data:t,props:p});if(r)throw new Error(r);if(!y)throw new Error("Required parameter not provided: headline");return n.useMemo((()=>{var e=k&&![o.Qs,i.v].includes(k)?"accent":"light-image";return(0,j.jsx)(a.A,{accentTheme:e,backgroundColour:k,backgroundImage:b,contextLabels:x,headerBottomMargin:w,headline:y,headlineType:m,metadataItems:T,metadataLabel:g,mode:L,shouldWrap:S,subheading:f,subheadingFontScale:l,summary:h,summaryFontScale:c,withGradient:E,children:(0,j.jsx)(N,{env:d,resourceId:u,resourceType:s,favourited:O,followed:P,setSignInPrompt:v,actionButton:I,zid:A,infoPanel:H,headline:y,accentTheme:e,showShareTool:D})})}),[x,f,y,l,h,c,T,g,d,u,s,O,P,v,I,b,k,w,S,A,H,L,D,m,E])}}}]);