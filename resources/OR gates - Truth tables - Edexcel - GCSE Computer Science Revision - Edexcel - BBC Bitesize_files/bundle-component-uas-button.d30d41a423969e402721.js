"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[9659],{31602:(e,t,n)=>{n.d(t,{i:()=>i});var r=n(63696),i=()=>{var[e,t]=(0,r.useState)(!1),n=(0,r.useCallback)((()=>t(!0)),[]),i=(0,r.useCallback)((()=>t(!1)),[]),a=(0,r.useCallback)((()=>t(!0)),[]),o=(0,r.useCallback)((()=>t(!1)),[]),c=(0,r.useRef)();return[(0,r.useCallback)((e=>{c.current&&(c.current.removeEventListener("focus",n),c.current.removeEventListener("blur",i),c.current.removeEventListener("mouseover",a),c.current.removeEventListener("mouseout",o)),c.current=e,c.current.addEventListener("focus",n),c.current.addEventListener("blur",i),c.current.addEventListener("mouseover",a),c.current.addEventListener("mouseout",o)}),[n,i,a,o]),e]}},54585:(e,t,n)=>{n.d(t,{P:()=>i});var r=n(63696),i=()=>{var[e,t]=(0,r.useState)(!1),n=(0,r.useCallback)((()=>t(!0)),[]),i=(0,r.useRef)();return[(0,r.useCallback)((e=>{i.current&&(i.current.removeEventListener("touchstart",n,{passive:!0}),i.current.removeEventListener("touchend",n)),i.current=e,i.current.addEventListener("touchstart",n,{passive:!0}),i.current.addEventListener("touchend",n)}),[n]),e]}},65094:(e,t,n)=>{n.d(t,{A:()=>X});var r=n(63696),i=n(12180),a=n(59310),o=n(81070),c=n(95584),s=n(2816),l=n(98804),u=n(49565),d=n(41738);const v={"en-GB":JSON.parse('{"error":{"title":"Sorry, something went wrong","content":"Check your connection, refresh the page and try again.","visuallyHidden":"There was a problem, try again"}}'),cy:JSON.parse('{"error":{"title":"Mae\'n ddrwg gennym, aeth rhywbeth o\'i le","content":"","visuallyHidden":"Roedd problem, rhowch gynnig arall arni"}}'),gd:JSON.parse('{"error":{"title":"Duilich, chaidh rudeigin ceàrr","content":"Dearbh do cheangal, ùraich an duilleag is feuch a-rithist.","visuallyHidden":"Bha trioblaid ann, feuch a-rithist"}}'),ga:JSON.parse('{"error":{"title":"Buartha, chuaigh rud éigin amú","content":"Seiceáil do cheangail, athnuaigh an leathanach agus triail arís.","visuallyHidden":"Bhí fadhb ann, triail arís"}}')};var p,f,b,h=n(31602),y=n(54585),g=n(49348),m={follows:{enabled:"followed",success:"unfollowed"},favourites:{enabled:"favourited",success:"unfavourited"}},O=n(25987),S=(e,t)=>{var{activityType:n,resourceType:r,resourceId:i,resourceDomain:a}=e;return(0,O.A)().withAction(m[n][t]).withResourceType(r).withResourceId(i).withResourceDomain(a).build()},w=n(77652),j=n(83051),P=n(91785),x=n(20641),A=n(11545),T=n(468),C=n(74437),E=n(27336),k=n(55522),D=n(62540),_=["states","currentState","onClick","focusRef","touchRef","alignContent","iconOnly","iconPosition","iconSize","useFullWidth","useThemeStyles"];function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function R(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach((function(t){L(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function L(e,t,n){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function N(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var z=(0,j.default)("div",{target:"e19pe5mb4",label:"ButtonWrapper"})("html.no-js &{display:none;}width:",(e=>{var{useFullWidth:t}=e;return t?"100%":"fit-content"}),";"),H=(0,j.default)("div",{target:"e19pe5mb3",label:"ContentsWrapper"})("display:grid;width:100%;justify-content:",(e=>{var{alignContent:t}=e;return"start"===t?"flex-start":"center"}),";"),B=(0,j.default)("span",{target:"e19pe5mb2",label:"ButtonStyles"})("display:flex;justify-content:",(e=>{var{alignContent:t}=e;return"start"===t?"flex-start":"center"}),";align-items:center;grid-column:1;grid-row:1;",x.NP," ",A.Vk," ",(e=>{var{visible:t}=e;return!t&&(0,P.AH)(p||(p=N(["\n      visibility: hidden;\n    "])))}),";",(e=>{var{reverseOrder:t}=e;return t&&(0,P.AH)(f||(f=N(["\n      flex-direction: row-reverse;\n    "])))}),";"),W=(0,j.default)("span",{target:"e19pe5mb1",label:"IconWrapper"})("width:",(0,T.A)(20),";height:1em;",(e=>{var{iconOnly:t,reverseOrder:n}=e;return t?"":n?"padding-left: ".concat(C.SPACING_2):"padding-right: ".concat(C.SPACING_2,";")})," ",(e=>{var{iconSize:t}=e;return"small"===t&&(0,P.AH)(b||(b=N(["\n      font-size: ",";\n    "])),(0,T.A)(14))}),";"),F=(0,j.default)("span",{target:"e19pe5mb0",label:"ButtonText"})({name:"3abrc0",styles:"width:auto"}),G=e=>{var{iconType:t,iconOnly:n,iconPosition:r,iconSize:i,visible:a,alignContent:o,children:c}=e,s="end"===r;return(0,D.jsxs)(B,{alignContent:o,reverseOrder:s,visible:a,children:[t&&(0,D.jsx)(W,{"data-testid":t,iconPosition:r,iconSize:i,reverseOrder:s,iconOnly:n,children:n?(0,D.jsx)(k.A,{type:t,children:c}):(0,D.jsx)(k.A,{type:t})}),!n&&(0,D.jsx)(F,{children:c})]})},U=e=>Object.entries(e).reduce(((t,n)=>{var[r,{text:i,iconType:a}]=n;return t.some((e=>(null==e?void 0:e.text)===i&&(null==e?void 0:e.iconType)===a))||t.push(R(R({},e[r]),{},{state:r})),t}),[]),K=e=>{var{states:t,iconOnly:n,iconPosition:r}=e;return(0,D.jsx)(D.Fragment,{children:U(t).map((e=>{var{state:t,text:i,iconType:a}=e;return(0,D.jsx)(G,{visible:!1,iconType:a,iconOnly:n,iconPosition:r,children:i},t)}))})},J=e=>{var{states:t,currentState:n,onClick:r,focusRef:i,touchRef:o,alignContent:c,iconOnly:s,iconPosition:l,iconSize:u,useFullWidth:d,useThemeStyles:v}=e,p=function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(e,_),{text:f,emphasis:b,iconType:h,visuallyHiddenText:y}=t[n];return(0,D.jsx)(z,{useFullWidth:d,currentState:n,useThemeStyles:v,children:(0,D.jsx)(E.A,R(R({emphasis:b,onClick:r,width:s&&!d?"content-length":"full",trackRef:(0,w.k)(i,o),cornerFit:v},p),{},{children:(0,D.jsxs)(H,{alignContent:c,children:[(0,D.jsxs)(G,{visible:!0,iconType:h,iconOnly:s,alignContent:c,iconPosition:l,iconSize:u,children:[(0,D.jsx)("span",{"data-testid":"uasButtonText",children:f}),(0,D.jsx)(a.A,{children:y})]}),!s&&(0,D.jsx)(K,{states:t,iconOnly:s,iconPosition:l})]})}))})};function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function V(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(Object(n),!0).forEach((function(t){q(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function q(e,t,n){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Q=e=>{var{hasError:t,panelContent:n,getPanelContent:r,state:i,errorText:a}=e;return t?a.content:r?r(i):n};const X=e=>{var t,n,p,{states:f,activityConfig:b,setSignInPrompt:m,env:O,iconOnly:j,iconSize:P,panelTheme:x,panelTitle:A,panelContent:T,getPanelContent:C,withAgeRestriction:E,withError:k,initialState:_="enabled",alignContent:I="centre",iconPosition:R="start",useFullWidth:L=!1,panelMaxWidthPx:N="336",panelAlignment:z="left",panelExpanded:H=!1,deleteActivityConfig:B={deleteOnSuccess:!1,deletePreviousAction:null,globalId:null},disableClickTracking:W=!1,disableViewTracking:F=!1,tracking:G={},experimentTracking:U={},onSuccess:K=()=>!0,disabled:M=!1,showInformationPanel:q=!0,isPanelButton:X=!0,useThemeStyles:Y=!1,uasErrorCallback:Z,onEnabled:$=()=>!1,cornerFit:ee=!1,onActive:te=()=>!1,enableDeferredAction:ne=!1}=e,[re,ie]=(0,h.i)(),[ae,oe]=(0,y.P)(),[ce,se]=(0,r.useState)("UNKNOWN"),le=(0,r.useId)(),ue=(0,r.useId)(),[de,ve]=(0,r.useState)(_),[pe,fe]=(0,r.useState)(H),[be,he]=(0,r.useState)(!1),[ye,ge]=(0,r.useState)(_),[me,Oe]=(0,r.useState)(""),Se=(0,r.useRef)(null),we=(n=(0,d.Dn)(),p="error",n in v?v[n][p]:v["en-GB"][p]);(0,r.useEffect)((()=>{ve(_),ge(_)}),[_]);var je=function(e){var{activityType:t}=e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"live",r="live"===n,i=r?"km5ifdffcjdoc":"19t3g6sdf3o50",a=r?n:"test";return(0,g.A)({apiKey:i,environment:a,activityType:t,tokenRefreshToggle:!0,timeout:3e3})}(b,O),Pe="".concat(de,"Hover"),xe=ie&&!oe&&f[Pe]&&!M?Pe:de,Ae=null!==(t=f[de])&&void 0!==t&&t.accessibleText?"".concat(f[de].accessibleText):"".concat(f[xe].text).concat(f[xe].visuallyHiddenText||""),Te=(e,t)=>{var n,r,i,a;return e.subitem?V(V(V({},e),t),{},{event:V(V(V({},e.event),t.event),{},{entity_name:"subitem"}),subitem:V(V(V({},e.subitem),t.subitem),{},{type:"user activity service button",text:null!==(a=f[ye].trackingText)&&void 0!==a?a:f[ye].text})}):V(V(V({},e),t),{},{item:V(V(V({},e.item),t.item),{},{type:null!==(n=null==e||null===(r=e.item)||void 0===r?void 0:r.type)&&void 0!==n?n:"user activity service button",text:null!==(i=f[ye].trackingText)&&void 0!==i?i:f[ye].text})})},Ce=Te(G,{eventAction:f[ye].statAction}),Ee=e=>{if(he(!0),Z&&Z(),q&&fe(!0),ve(e),window.Reverb){var t=Te(G,{eventAction:"error",event:{category:"error"},error:{type:f.enabled.statAction,name:"".concat(f[ye].statAction," error"),message:"Sorry, something went wrong. Check your connection, refresh the page and try again."}});window.Reverb.userActionEvent("viewability",void 0,t)}};(0,r.useEffect)((()=>{se((0,u.A)()?"SIGNED_IN":"SIGNED_OUT")}),[]);var ke={enabled:()=>{var e=S(b,"enabled"),t=(0,w.u)(1e3),n=je.post(e);ve("enabledActive"),te(),Promise.all([t,n]).then((()=>{ve("success"),ge("success");var e=K("success");q&&fe(e)})).catch((e=>(i.z3("Error posting a follow event to UAS",e),Ee("enabled"))))},success:()=>{var e=!B.deleteOnSuccess&&S(b,"success"),t=(0,w.u)(1e3),n=B.deleteOnSuccess?je.delete(B.deletePreviousAction,B.globalId):je.post(e);ve("successActive"),te(),Promise.all([t,n]).then((()=>{ve("enabled"),ge("enabled");var e=$("enabled");fe(e)})).catch((e=>(i.z3("Error posting an unfollow or delete event to UAS",e),Ee("success"))))},signedOut:()=>{var e=(0,w.u)(100);Promise.all([e]).then((()=>{m({show:!0}),ve("signedOut"),ge("signedOut")}))},error:()=>{var e=(0,w.u)(100);ve("enabledActive"),he(!0),Promise.all([e]).then((()=>Ee(_)))}},[De]=(0,s.P)({eventData:{action:"enabled"},eventKey:"uas_button_action_".concat(b.resourceId),storageType:"SESSION",predicate:()=>(0,u.A)(),callback:()=>ke.enabled()}),_e=()=>{he(!1),fe(!1);var e=(0,u.A)();E||k||"SIGNED_OUT"===ce&&e?ke.error():e?ke[de]&&ke["signedOut"===de?_:de]():(ke.signedOut(),ne&&De())};return(0,r.useEffect)((()=>{Oe(be?we.visuallyHidden:Ae),Se.current&&clearTimeout(Se.current),Se.current=setTimeout((()=>{Oe("")}),1e3)}),[be,Ae,we.visuallyHidden]),(0,D.jsx)(o.A,{id:ue,expanded:pe,panelStateCallback:fe,panelTitle:be?we.title:A,panelType:be?"error":"midground",panelIcon:be&&"labels:warning",panelMaxWidthPx:N,horizontalAlignment:z,panelTheme:x,button:(0,D.jsx)(c.C,V(V({tracking:Ce,trackClicks:!W,trackView:!F},(0,l.l)(U)),{},{viewKey:ye,stopPropagation:!0,children:e=>{var{trackRef:t}=e;return(0,D.jsxs)("div",{ref:t,children:[(0,D.jsx)(J,{states:f,currentState:xe,onClick:_e,focusRef:re,touchRef:ae,alignContent:I,iconOnly:j,cornerFit:ee,iconPosition:R,iconSize:P,useFullWidth:L,"aria-labelledby":le,"aria-expanded":X?pe:void 0,disabled:M,useThemeStyles:Y,"data-testid":"uas-button"}),(0,D.jsx)(a.A,{"data-testid":"visually-hidden-announcement",as:"p",id:le,"aria-live":"assertive",children:me})]})}})),children:(0,D.jsx)(Q,{hasError:be,panelContent:T,getPanelContent:C,state:de,errorText:we})})}},77652:(e,t,n)=>{n.d(t,{k:()=>i,u:()=>r});var r=e=>new Promise((t=>setTimeout(t,e))),i=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>{t.forEach((t=>{t&&e&&("function"==typeof t?t(e):t.current=e.current)}))}}}}]);