"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[9884],{2396:(e,t,r)=>{r.d(t,{Ay:()=>je});var n=r(63696),o=r(78325),i=r(83051),a=r(35289),l=r(16061),s=r(74437),c=r(468),u=r(27336),d=r(95584);var p=r(63548);var g,v=r(91785),h=r(10737),m=r(20641),f=r(11545),b=r(65094),y=r(27813),x=r(59310),w=r(55522),P=r(62540),j=(0,i.default)("div",{target:"e8ajwjv5",label:"StyledPanel"})("display:block;",(e=>{var{expanded:t}=e;return t&&"position: relative"}),";html.no-js &{display:none;}"),S=(0,i.default)("div",{target:"e8ajwjv4",label:"StyledPanelContent"})(m.tc," ",f.K1," ",(e=>{var{hidden:t}=e;return!t&&"display: flex"}),";",(e=>{var{theme:t,hasError:r}=e;return(e=>{var t,r,{theme:n,hasError:o}=e,i=o?n.colourPalette.states.errorText:n.colourPalette.border;return(0,v.AH)(g||(t=["\n    background-color: ",";\n    color: ",";\n    border: "," solid ",";\n  "],r||(r=t.slice(0)),g=Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(r)}}))),o?n.colourPalette.background:n.colourPalette.midground,n.colourPalette.primary,(0,c.A)(1),i)})({theme:t,hasError:r})}),";",(e=>{var{verticalAlignment:t}=e;return"top"===t?"bottom: calc(100% + ".concat(s.SPACING_6,")"):"top: calc(100% + ".concat(s.SPACING_6,")")}),";",(e=>{var{horizontalAlignment:t}=e;return"left"===t&&"left: 0"}),";",(e=>{var{horizontalAlignment:t}=e;return"right"===t&&"right: 0"}),";",(e=>{var{horizontalAlignment:t}=e;return"centre"===t&&"left: 50%; transform: translateX(-50%)"}),";width:",(e=>{var{width:t}=e;return t||"15rem"}),";&::before,&::after{content:'';display:inline-block;position:absolute;",(e=>{var{verticalAlignment:t}=e;return"top"===t?"clip-path: polygon(0 0, 50% 100%, 100% 0) ":"clip-path: polygon(0 100%, 50% 0, 100% 100%)"}),";width:",(0,c.A)(16),";height:",(0,c.A)(12),";",(e=>{var{horizontalAlignment:t}=e;return"left"===t&&"left: ".concat(s.SPACING_4)}),";",(e=>{var{horizontalAlignment:t}=e;return"right"===t&&"right: ".concat(s.SPACING_4)}),";",(e=>{var{horizontalAlignment:t}=e;return"centre"===t&&"left: calc(50% - ".concat(s.SPACING_2,")")}),";}background:",(e=>{var{theme:t}=e;return t.colourPalette.midground}),";color:",(e=>{var{theme:t}=e;return t.colourPalette.primary}),";"),O=(0,i.default)("div",{target:"e8ajwjv3",label:"PanelWrapper"})("padding:",s.SPACING_3,";",(e=>{var{hideTitle:t}=e;return t?"display: inline-block":"display: block"}),";"),T=(0,i.default)("div",{target:"e8ajwjv2",label:"StyledTitleArea"})(m.NP," ",f.Vk," padding-bottom:",s.SPACING_4,";",(e=>{var{hideTitle:t}=e;return t&&x.A.styles})," white-space:pre-line;",(e=>{var{theme:t,hasError:r}=e;return r&&"color: ".concat(t.colourPalette.states.errorText)}),";"),A=(0,i.default)("div",{target:"e8ajwjv1",label:"IconWrapper"})("align-self:flex-start;width:1em;padding-left:",s.SPACING_3,";padding-top:",s.SPACING_3,";min-width:",(0,c.A)(20),";",(e=>{var{theme:t,hasError:r}=e;return r&&"color: ".concat(t.colourPalette.states.errorText)}),";"),k=(0,i.default)("div",{target:"e8ajwjv0",label:"CloseButtonWrapper"})("float:right;",(e=>{var{hideTitle:t}=e;return!t&&"margin-left: ".concat(s.SPACING_3,";")}),";"),E=e=>{var{theme:t,children:r}=e;return t?(0,P.jsx)(y.a,{theme:t,children:r}):r};const C=e=>{var{id:t,panelTitle:r,panelTheme:o,panelIcon:i,panelMaxWidthPx:a,panelStateCallback:l,horizontalAlignment:s="left",verticalAlignment:c="bottom",expanded:g=!1,panelText:v="",hasError:h=!1,showCloseButton:m=!1,children:f,tracking:b={}}=e,y=(0,n.useRef)(null),x=(0,n.useRef)(null),[C,I]=(0,n.useState)({expanded:Boolean(g),shiftFocus:!1}),D=e=>{null==e||e.preventDefault(),I({expanded:!C.expanded,shiftFocus:!0})},N=(0,n.useRef)(!0);(0,n.useEffect)((()=>{N.current?N.current=!1:I({expanded:Boolean(g),shiftFocus:Boolean(g)})}),[g]),(0,n.useEffect)((()=>{"function"==typeof l&&l(C.expanded)}),[C,l]);var{groupName:R,groupType:L,groupPosition:H}=b,_=(e=>{var{groupName:t,groupType:r,groupPosition:n,resourceId:o}=e;return(0,p.D9)({groupName:t,groupType:r,groupPosition:n,itemName:"error panel close",itemType:"quick actions menu",headline:"close",topicId:o,experienceResourceId:o})})({groupName:R,groupType:L,groupPosition:H});return(0,P.jsx)(j,{expanded:C.expanded,ref:y,id:t,"data-testid":"panel",children:(0,P.jsx)(E,{theme:o,children:(0,P.jsxs)(S,{hidden:!C.expanded,role:"group",horizontalAlignment:s,verticalAlignment:c,ref:x,width:a,"data-testid":"panel-content",hasError:h,"aria-labelledby":h?"":t,children:[i&&(0,P.jsx)(A,{"data-testid":i,hasError:h,children:(0,P.jsx)(w.A,{type:i})}),(0,P.jsxs)("div",{children:[m&&(0,P.jsx)(d.C,{tracking:_,children:e=>{var{trackRef:t}=e;return(0,P.jsx)(k,{children:(0,P.jsx)(u.A,{emphasis:"low",iconOnly:"true",iconType:"actions:close",onClick:D,cornerFit:!0,children:" ",trackRef:t})})}}),(0,P.jsxs)(O,{hideTitle:!r,children:[(0,P.jsx)(T,{hideTitle:!r,hasError:h,children:r}),v?(0,P.jsx)("p",{"data-testid":h?"error-message":"panel-text",children:v}):f]})]})]})})})};var I=r(61246),D=(0,i.default)("span",{target:"eduo6dj2",label:"IconWrapper"})("display:inline-block;width:16px;height:16px;padding-right:",s.SPACING_2,";min-width:",(0,c.A)(20),";vertical-align:-2px;"),N=(0,i.default)("div",{target:"eduo6dj1",label:"ServiceStyledDiv"})(m.NP," ",f.Vk," ",I.Dx," margin-top:",(e=>{var{reasonShown:t}=e;return t?"0px":"16px"}),";margin-bottom:",(e=>{var{reasonShown:t}=e;return t?"16px":"0px"}),";color:",(e=>{var{theme:t}=e;return t.colourPalette.primary}),";padding:11px 12px;"),R=(0,i.default)("a",{target:"eduo6dj0",label:"ServiceLinkStyledA"})("&:link{color:",(e=>{var{theme:t}=e;return t.colourPalette.primary}),";}&:visited{color:",(e=>{var{theme:t}=e;return t.colourPalette.primary}),";}&:any-link{",m.jG," text-decoration:underline;text-decoration-color:",(e=>{var{theme:t}=e;return t.colourPalette.border}),";text-decoration-thickness:1px;text-decoration-skip-ink:none;text-underline-offset:0.25em;&:hover,&:focus{text-decoration-color:currentcolor;text-decoration-thickness:2px;color:",(e=>{var{theme:t}=e;return t.colourPalette.hyperlink}),";}}");const L=e=>{var{itemUrl:t,service:r,reasonShown:n}=e,o=(e=>{var{service:t}=e;return{sounds:{text:"Go to My Sounds"},iplayer:{text:"Go to Watchlist"}}[t]})({service:r});if(!r)return null;var i="service-identifiers:".concat(r);return(0,P.jsxs)(N,{reasonShown:n,children:[(0,P.jsx)(D,{"data-testid":i,tabIndex:"-1","aria-hidden":"true",children:(0,P.jsx)(w.A,{type:i,children:null==o?void 0:o.text})}),(0,P.jsx)(R,{href:t[r],children:null==o?void 0:o.text})]})};var H=r(66510),_=r(14810),M={iplayer:"iPlayer Watchlist",sounds:"My Sounds"},W={iplayer:e=>({success:"".concat(e," has been added to your "),enabled:"".concat(e," has been removed from your ")}),sounds:e=>({success:"".concat(e," has been added to "),enabled:"".concat(e," has been removed from ")})},F=e=>{var{state:t,title:r,service:n,urls:o}=e;return["enabled","success"].includes(t)&&["iplayer","sounds"].includes(n)?(0,P.jsxs)("p",{"data-testid":"panel-content-paragraph",children:[W[n](r)[t],(0,P.jsx)(_.A,{url:o[n],isExternal:!0,children:M[n]})]}):(0,P.jsx)("div",{})};function B(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function z(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?B(Object(r),!0).forEach((function(t){G(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):B(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function G(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var U,q=(e,t)=>e?"Sorry, this isnâ€™t working right now":t?"Sorry, something went wrong":null,V=(0,i.default)("div",{target:"e3vea6o5",label:"QuickUserActionsMenuTitleArea"})(m.tc," ",f.cx," padding-bottom:",s.SPACING_4,";white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:",(0,c.A)(297),";color:",(e=>{var{theme:t}=e;return t.colourPalette.secondary}),";"),Q=e=>{var t,r,{theme:n}=e;return(0,v.AH)(U||(t=["\n    border-top: "," solid ",";\n  "],r||(r=t.slice(0)),U=Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(r)}}))),(0,c.A)(1),n.colourPalette.divider)},K=(0,i.default)("div",{target:"e3vea6o4",label:"UasButtonWrapper"})("padding:",s.SPACING_4," 0 ",(e=>{var{showPanel:t,reasonShown:r}=e;return(e=>{var{showPanel:t,reasonShown:r}=e;return t?s.SPACING_2:r?s.SPACING_4:0})({showPanel:t,reasonShown:r})})," 0;margin:0 0 0 0;min-height:",(e=>{var{minHeight:t}=e;return t||"auto"}),";",(e=>{var{theme:t}=e;return Q({theme:t})}),";"),$=(0,i.default)("div",{target:"e3vea6o3",label:"PanelWrapper"})("padding-top:0;padding-bottom:",(e=>{var{reasonShown:t}=e;return t?s.SPACING_4:0}),";"),X=(0,i.default)("div",{target:"e3vea6o2",label:"ServiceLinkWrapper"})({name:"1pndkbx",styles:"color:'inherit'"}),J=(0,i.default)("div",{target:"e3vea6o1",label:"ReasonShownWrapper"})((e=>{var{theme:t,reasonShown:r}=e;return r&&Q({theme:t})}),";"),Y=(0,i.default)("span",{target:"e3vea6o0",label:"RecommendationsHistoryWrapper"})(m.NP,"@media (max-width: ",a.js,"){",f.B3,";}"),Z={iplayer:"https://www.bbc.co.uk/iplayer/watchlist",sounds:"https://www.bbc.co.uk/sounds/my/subscribed"},ee="We know this is annoying, but we are working on it.",te=(0,n.forwardRef)(((e,t)=>{var{personalisedActions:r,title:o,service:i,setPersonalisedActionsState:a,width:l,minHeight:s,tracking:u,handleClose:g,lastFocusableElementInModalId:v}=e,m=t,{groupName:f,groupType:y,groupPosition:x,groupItemCount:w}=u,[j,S]=(0,n.useState)(!1),[O,T]=(0,n.useState)(!1),[A,k]=(0,n.useState)(!1),[E,I]=(0,n.useState)({}),[D,N]=(0,n.useState)(""),R=(0,n.useRef)(),{env:_}=(0,h.i3)(),{resourceType:B,resourceDomain:G,reasonShown:U,tleoId:Q,isProgrammeError:te,isActivityError:re,isSupportedUserActionsError:ne,isTypeError:oe}=r,ie=(e=>{var{service:t,title:r}=e,n={sounds:{enabled:{text:"Subscribe",iconType:"content-types:podcast-filled",emphasis:"low",visuallyHiddenText:" to ".concat(r)},enabledHover:{text:"Subscribe",iconType:"content-types:podcast-filled",emphasis:"low",visuallyHiddenText:" to ".concat(r)},enabledActive:{text:"Subscribing",iconType:"playback-avkx:loading",emphasis:"high",visuallyHiddenText:" to ".concat(r)},success:{text:"Subscribed",iconType:"actions:confirm",emphasis:"high",visuallyHiddenText:" to ".concat(r),trackingText:"Unsubscribe"},successHover:{text:"Unsubscribe",iconType:"actions:close",emphasis:"high",visuallyHiddenText:" to ".concat(r)},successActive:{text:"Unsubscribing",iconType:"playback-avkx:loading",emphasis:"high",visuallyHiddenText:" to ".concat(r)}},iplayer:{enabled:{text:"Watchlist",iconType:"actions:add-alt",emphasis:"low",visuallyHiddenText:" to ".concat(r),accessibleText:"Add ".concat(r," to Watchlist")},enabledHover:{text:"Watchlist",iconType:"actions:add-alt",emphasis:"low",visuallyHiddenText:" to ".concat(r)},enabledActive:{text:"Adding",iconType:"playback-avkx:loading",emphasis:"high",visuallyHiddenText:" ".concat(r)},success:{text:"Watchlist",iconType:"actions:confirm",emphasis:"high",visuallyHiddenText:" to ".concat(r),trackingText:"Remove",accessibleText:"Remove ".concat(r," from Watchlist")},successHover:{text:"Remove",iconType:"actions:close",emphasis:"high",visuallyHiddenText:" to ".concat(r)},successActive:{text:"Removing",iconType:"playback-avkx:loading",emphasis:"high",visuallyHiddenText:" ".concat(r)}},default:{enabled:{text:"Subscribe",iconType:"content-types:podcast-filled",emphasis:"low",visuallyHiddenText:" to ".concat(r)},enabledHover:{text:"Subscribe",iconType:"content-types:podcast-filled",emphasis:"low",visuallyHiddenText:" to ".concat(r)},enabledActive:{text:"Subscribing",iconType:"playback-avkx:loading",emphasis:"low",visuallyHiddenText:" to ".concat(r)},success:{text:"Subscribed",iconType:"actions:confirm",emphasis:"low",visuallyHiddenText:" to ".concat(r)},successHover:{text:"Unsubscribe",iconType:"actions:close",emphasis:"low",visuallyHiddenText:" to ".concat(r)},successActive:{text:"Unsubscribing",iconType:"playback-avkx:loading",emphasis:"low",visuallyHiddenText:" to ".concat(r)}}};return n[t]?n[t]:n.default})({service:i,title:o}),ae=(e=>{var{groupName:t,groupType:r,groupPosition:n,resourceId:o}=e;return{group:{name:t,type:r,position:n+1},item:{name:"uas button",type:"quick actions menu",topic_id:o},experience:{resource_id:o}}})({groupName:f,groupType:y,groupPosition:x,resourceId:Q}),[le,se]=(e=>{if(!e)return["",""];var t=null==e?void 0:e.split(" ");if(t.length<3)return[""];var r=t.splice(-2);return[t.join(" "),r.join(" ")]})(U),ce={resourceType:B,resourceDomain:G,resourceId:Q,activityType:"follows"},ue={deleteOnSuccess:!0,deletePreviousAction:"follow",globalId:"urn:bbc:".concat(G,":").concat(B,":").concat(Q)},de=e=>{var t;S(!1),T(!1),k(!0),"success"===e&&(t=!0,((e,t)=>{e(z(z({},t),{},{isFollowing:!0}))})(a,r)),"enabled"===e&&(t=!1,((e,t)=>{e(z(z({},t),{},{isFollowing:!1}))})(a,r)),document.dispatchEvent(new CustomEvent(null==r?void 0:r.tleoId,{detail:{isFollowing:t}})),I(F({state:e,service:i,title:o,urls:Z})),N((e=>{var{state:t,title:r,service:n}=e;return"".concat(W[n](r)[t]).concat(M[n])})({state:e,service:i,title:o}))},pe=g(k),ge=te||re||ne||oe||O,ve=(e=>{var{groupName:t,groupType:r,groupPosition:n,groupItemCount:o,resourceId:i,showError:a,itemUrl:l,itemText:s}=e;return(0,p.D9)({groupName:t,groupType:r,groupPosition:n,groupItemCount:o,itemName:a?"error panel":"success panel",itemType:"quick actions menu",itemUrl:l,headline:s,itemPosition:0,topicId:i,experienceResourceId:i})})({groupName:f,groupType:y,groupPosition:x,groupItemCount:w,resourceId:Q,showError:ge,itemUrl:Z[i],itemText:D});return(0,n.useEffect)((()=>{ge&&(I(ee),N(ee)),T(ge),k(ge)}),[ge]),(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(V,{id:"menu-title","aria-hidden":!0,children:o}),(0,P.jsx)(K,{"data-testid":"uasButtonWrapperId",ref:R,minHeight:s,reasonShown:U,showPanel:A,children:(0,P.jsx)(b.A,{states:ie,initialState:null!=r&&r.isFollowing?"success":"enabled",activityConfig:ce,deleteActivityConfig:ue,env:_,useFullWidth:!0,alignContent:"start",useThemeStyles:!0,getPanelContent:F,hideTitle:!0,disabled:re,cornerFit:!0,showInformationPanel:!1,onEnabled:de,onSuccess:de,uasErrorCallback:()=>{S(!0),k(!0),T(!0),I("Check your connection, refresh the page and try again."),N("Check your connection, refresh the page and try again.")},tracking:ae,onActive:()=>{k(!1)}})}),A&&(0,P.jsx)(d.C,{tracking:ve,trackClicks:!1,trackView:!0,children:e=>{var{trackRef:t}=e;return(0,P.jsx)($,{ref:t,reasonShown:U,children:(0,P.jsx)(C,{hasError:O,panelMaxWidthPx:l?"calc(100% - 1px)":(0,c.A)(336),panelText:E,panelTitle:O&&q(ge,j),panelIcon:O&&"labels:warning",id:O?"error-panel-left":"panel-left",expanded:!0,showCloseButton:j,panelStateCallback:pe,tracking:u})})}}),(0,P.jsx)(X,{"data-testid":v,ref:m,children:(0,P.jsx)(L,{service:i,itemUrl:Z,reasonShown:U,tabindex:"0"})}),U&&(0,P.jsx)(J,{reasonShown:U,children:(0,P.jsxs)(H.A,{type:"status",hasBackground:!1,isQuickUserActionsMenuInfo:!0,children:[le,(0,P.jsxs)(Y,{children:[" ",se]})]})})]})}));const re=te;function ne(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function oe(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ie=(0,i.default)("div",{target:"e1pi4ty91",label:"ModalWrapper"})("outline:none;user-select:none;width:",(e=>{var{$width:t}=e;return t||"0px"}),";align-self:flex-end;z-index:",l.o.MEDIA_CONTAINER,";@media (max-width: ",a.js,"){width:100%;}"),ae=(0,i.default)("div",{target:"e1pi4ty90",label:"CloseButtonWrapper"})("position:absolute;right:",(0,c.A)(-6),";top:",(0,c.A)(-6),";padding:",(0,c.A)(6),";margin-left:",s.SPACING_3,";"),le="lastFocusableElementInModalId",se=e=>function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]||e(!1)};const ce=e=>{var{title:t,closeButton:r,service:o,minHeight:i,personalisedActions:a,setPersonalisedActionsState:l,width:s,tracking:c,resourceId:g,renderDialogContent:v}=e,h=(0,n.useRef)(),m=(0,n.useRef)(),{groupName:f,groupType:b,groupPosition:y,groupItemCount:x}=c,w=(e=>{var{groupName:t,groupType:r,groupPosition:n,groupItemCount:o,resourceId:i}=e;return(0,p.D9)({groupName:t,groupType:r,groupPosition:n,groupItemCount:o,itemName:"quick actions menu close",itemType:"quick actions menu",headline:"close",topicId:i,experienceResourceId:i})})(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ne(Object(r),!0).forEach((function(t){oe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ne(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({groupName:f,groupType:b,groupPosition:y,groupItemCount:x},g&&{resourceId:g})),j=()=>{var e=(()=>{var e,t,r=!1;return"undefined"!=typeof window&&(r="ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0||(null===(e=(t=window).matchMedia)||void 0===e||null===(e=e.call(t,"(pointer: coarse)"))||void 0===e?void 0:e.matches)||/iphone|ipad|ipod|android|webos|blackberry|iemobile|opera mini|mobile|tablet/.test(navigator.userAgent.toLowerCase())),r})(),t=window.innerWidth,r=!0;return e&&t<900&&(r=!1),!e&&t<600&&(r=!1),r};return(0,n.useEffect)((()=>{var e=h.current.firstChild;setTimeout((()=>{e.focus()}),0);var t=t=>{var n=!1,o="Tab"===t.key,i=t.shiftKey,a=t.target===e;if(o){var l,s=null===(l=m.current)||void 0===l?void 0:l.children[m.current.children.length-1];i?a&&(t.preventDefault(),(n=j())||Array.from(null==s?void 0:s.querySelectorAll("input, button, a, [tabindex]")).find((e=>-1!==e.tabIndex)).focus()):(e=>{for(var{childElement:t,parentElement:r,maxSearchLevels:n=7}=e,o=t,i=0;o&&i<n;){if(o===r)return!0;o=o.parentElement,i+=1}return!1})({childElement:t.target,parentElement:s,maxSearchLevels:7})&&(t.preventDefault(),(n=j())||e.focus())}n&&r(t)};return document.addEventListener("keydown",t),()=>{document.removeEventListener("keydown",t)}}),[]),(0,P.jsxs)(ie,{$width:s,children:[(0,P.jsx)(d.C,{tracking:w,children:e=>{var{trackRef:t}=e;return(0,P.jsx)(ae,{ref:h,children:(0,P.jsx)(u.A,{width:"content-length",emphasis:"low",iconType:"actions:close",iconPosition:"end",iconOnly:"true",name:"quick-user-actions-menu-close","data-testid":"quick-user-actions-menu-close-button",onClick:r,cornerFit:!0,trackRef:t,tabIndex:0,children:"close quick actions menu"})})}}),v&&v({lastFocusableElementInModalRef:m,handleClose:se,lastFocusableElementInModalId:le}),a&&(0,P.jsx)(re,{personalisedActions:a,title:t,service:o,setPersonalisedActionsState:l,width:s,minHeight:i,tracking:c,handleClose:se,ref:m,lastFocusableElementInModalId:le}),(0,P.jsx)("button",{"data-testid":"hiddenFocusTrapStyledButtonId",type:"button",tabIndex:"0",style:{position:"absolute",width:"1px",height:"1px",opacity:"0",overflow:"hidden"},onFocus:e=>{var t;null===(t=h.current)||void 0===t||null===(t=t.firstChild)||void 0===t||t.focus(),j()&&r(e)},children:"Focusable Trap will set focus to Close button and get past end of group issue. Had to do this as firefox wouldnt work when I used styled button"})]})};function ue(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function de(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ue(Object(r),!0).forEach((function(t){pe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ue(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function pe(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ge=(e,t)=>{var r={calcLeft:5,calcBottom:10};return t?e<a.R4?de({touchModalDesignSmall:!0},r):de({touchModalDesignLarge:!0},r):e<a._G?de({nonTouchModalDesignSmall:!0},r):de({nonTouchModalDesignLarge:!0},r)};const ve=e=>{var t,r,n,o,i,a,{isRenderedState:l,element:s,modalElement:u}=e;if(l){var{touchModalDesignSmall:d,nonTouchModalDesignSmall:p,isIdealPositionDesign:g,isLeftHorizOverflowDesign:v,isVerticalOverflowDesign:h,isRightHorizVertOverflowDeisgn:m,carouselWidth:f,leftEdgeFromRight:b,topEdgeFromBottom:y,yPosition:x,xPosition:w,widthOfElement:P}=(e=>{var t,r,{element:n,modalElement:o}=e,i=window.innerWidth,a=window.innerHeight,l="ontouchstart"in window||navigator.maxTouchPoints>0,s=ge(i,l),c=Object.keys(s).length>0,{touchModalDesignLarge:u,nonTouchModalDesignLarge:d}=s,p=Boolean(u),g=Boolean(d);if(c&&!p&&!g)return s;var v=document.querySelector('[class*="CarouselRightOverlay"]'),h=n.closest('[class*="CarouselContainer"]'),m=h&&v?parseInt(null===(t=window)||void 0===t||null===(t=t.getComputedStyle(v))||void 0===t?void 0:t.width,10):0,f=null==o||null===(r=o.getBoundingClientRect())||void 0===r?void 0:r.width,b=n.getBoundingClientRect().left,y=n.getBoundingClientRect().bottom,x=n.getBoundingClientRect().width,w=b+x,P=i-b,j=P-m,S=a-y,O=h?j:P,T=l&&i>=900||!l&&i>=600;return{touchModalDesignSmall:!1,nonTouchModalDesignSmall:!1,touchModalDesignLarge:p,nonTouchModalDesignLarge:g,isIdealPositionDesign:T&&S>300&&w>f+16,isLeftHorizOverflowDesign:T&&S>300&&w<=f+16,isVerticalOverflowDesign:T&&S<=300&&O>f,isRightHorizVertOverflowDeisgn:T&&S<=300&&O<=f,carouselWidth:m,leftEdgeFromRight:P,leftEdgeFromTransparency:j,leftEdgeFromRightFinalvalue:O,topEdgeFromBottom:a-n.getBoundingClientRect().top,yPosition:y,xPosition:b,widthOfElement:x}})({element:s,modalElement:u});p?(a="0 auto",n="auto",t="16px",i="16px",o="16px"):d?(a="0 auto",n="auto",t="8px",i="8px",o="8px"):n=(0,c.A)(333),g?(a="".concat(8,"px 0px 0px 0px"),i="".concat(b-P,"px"),r="".concat(x,"px"),o="auto",t="auto"):v?(a="".concat(8,"px 0px 0px 0px"),o="16px",r="".concat(x,"px"),i="auto",t="auto"):h?(t="".concat(y,"px"),r="auto",a="0px 0px 8px 0px",o="".concat(w,"px"),i="auto"):m&&(t="".concat(y,"px"),r="auto",a="0px 0px 8px 0px",o="auto",i=f?"".concat(f,"px"):"16px")}return{bottom:t,top:r,width:n,left:o,right:i,margin:a}},he=e=>{for(var{startingElement:t,partialClassName:r}=e,n=t;n;){if(n.classList&&Array.from(n.classList).some((e=>e.includes(r))))return n;n=n.parentElement}return null};function me(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function fe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?me(Object(r),!0).forEach((function(t){be(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):me(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function be(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ye=(0,i.default)("div",{target:"e1h1lg0y2",label:"StyledOverlayTouchEnabledLT900"})("display:",(e=>{var{$isTouchEnabledLT900:t}=e;return t?"flex":"none"}),";position:fixed;top:0px;left:0px;height:100%;width:100%;background:rgba(20, 20, 20, 0.6);backdrop-filter:blur(0rem);z-index:999;@media (max-width: ","".concat(a._G-1,"px"),"){display:flex;}"),xe=(0,i.default)("dialog",{target:"e1h1lg0y1",label:"QuickUserActionsMenuDialog"})("display:flex;z-index:",l.o.INFORMATION_PANEL_CONTENT,";position:fixed;padding:",s.SPACING_4,";border:",(e=>{var{theme:t}=e;return"".concat((0,c.A)(1)," solid ").concat(t.colourPalette.border)}),";top:",(e=>{var{top:t}=e;return t||"auto"}),";bottom:",(e=>{var{bottom:t}=e;return t||"auto "}),";left:",(e=>{var{left:t}=e;return t||"0px"}),";right:",(e=>{var{right:t}=e;return t||"auto"}),";width:",(e=>{var{width:t}=e;return t||"0px"}),";margin:",(e=>{var{margin:t}=e;return t||"auto"}),";background:",(e=>{var{theme:t}=e;return t.colourPalette.midground}),";color:",(e=>{var{theme:t}=e;return t.colourPalette.primary}),";outline:2px solid transparent!important;box-shadow:none;user-select:none;"),we=(0,i.default)("div",{target:"e1h1lg0y0",label:"ButtonWrapperStyledDiv"})("z-index:20;",(e=>{var{isSelected:t}=e;return t&&"\n      outline: 0 solid #000;\n      outline-offset: 0px;\n    "}),";"),Pe=e=>{var{buttonWrapperStyledDivRef:t,menuRef:r,title:o,buttonHandler:i,service:a,minHeight:l,personalisedActions:s,setPersonalisedActionsState:c,tracking:u,resourceId:d,renderDialogContent:p}=e,g=(0,n.useRef)(),v=(0,n.useId)(),[h,m]=(0,n.useState)(0),[f,b]=(0,n.useState)(!1),y=t.current,{bottom:x,top:w,width:j,left:S,right:O,margin:T}=ve({isRenderedState:f,element:y,modalElement:r.current});return(0,n.useEffect)((()=>{var e=e=>{var t=y.getBoundingClientRect().bottom;return m(t),Math.abs(g.current-t)>200&&(g.current=t,i(e)),!1},t=e=>{i(e)},n=e=>{"Escape"===e.key&&i(e)},o=e=>{r.current&&!r.current.contains(e.target)&&y&&!y.contains(e.target)&&(e.preventDefault(),i(e))};document.addEventListener("mousedown",o),window.addEventListener("scroll",e),window.addEventListener("orientationchange",t),window.addEventListener("resize",t);var a=null==r?void 0:r.current;null==a||a.addEventListener("keydown",n),a.focus(),g.current=y.getBoundingClientRect().bottom;var l=e=>{var{scrollLeft:t}=e.target;0!==t&&i(e)},s=y.closest('[role="list"]');return null==s||s.addEventListener("scroll",l),b(!0),()=>{document.removeEventListener("mousedown",o),window.removeEventListener("scroll",e),window.removeEventListener("orientationchange",t),window.removeEventListener("resize",t),null==s||s.removeEventListener("scroll",l),null==a||a.removeEventListener("keydown",n)}}),[]),(0,n.useEffect)((()=>{m(h)}),[h]),(0,n.useEffect)((()=>{m(w)}),[w]),(0,P.jsx)(xe,{ref:r,"data-testid":"quick-user-actions-menu",top:w,bottom:x,left:S,right:O,width:j,margin:T,disabled:!f,"aria-label":"Quick User Actions Menu for ".concat(o),role:"dialog",children:(0,P.jsx)(ce,{title:o,closeButton:i,service:a,minHeight:l,personalisedActions:s,setPersonalisedActionsState:c,width:j,tracking:u,id:v,resourceId:d,renderDialogContent:p})})};const je=e=>{var t,r,i,{title:a="Panel title",personalisedActions:l,service:s,bottom:c="0",minHeight:g,tracking:v,resourceId:h,renderDialogContent:m=()=>null}=e,f=(0,n.useRef)(null),b=(0,n.useRef)(null),y=(0,n.useRef)(null),x=(0,n.useRef)(null),w=(0,n.useRef)(null),[j,S]=(0,n.useState)(!1),[O,T]=(0,n.useState)(!1),[A,k]=(0,n.useState)(!1),[E,C]=(0,n.useState)(null),{groupName:I,groupType:D,groupPosition:N,groupItemCount:R}=v||{groupName:"",groupType:"",groupPosition:"",groupItemCount:0},L={groupName:I,groupType:D,groupPosition:N,groupItemCount:R},H=(e=>{var{groupName:t,groupType:r,groupPosition:n,groupItemCount:o,resourceId:i}=e;return(0,p.D9)({itemName:"more info",groupName:t,groupType:r,groupPosition:n,groupItemCount:o,itemType:"quick actions menu",headline:"more info",topicId:i,experienceResourceId:i})})({groupName:I,groupType:D,groupPosition:N,groupItemCount:R,resourceId:h}),_=e=>{x.current=e.target,S(!j)};return(0,n.useEffect)((()=>{var e=()=>{w.current&&w.current.disconnect(),w.current=(e=>{var t=he({startingElement:e,partialClassName:"CarouselItem"});if(t){var r=he({startingElement:t,partialClassName:"CarouselContainer"});if(r){var n=r.querySelector('[class*="CarouselLeftOverlay"]'),o=r.querySelector('[class*="CarouselRightOverlay"]'),i=r.querySelector('[class*="CarouselControls"]'),a=i.children[0],l=i.children[1],s=0,c={root:null,rootMargin:"0px -".concat((null==o?void 0:o.offsetWidth)||0,"px 0px -").concat((null==n?void 0:n.offsetWidth)||0,"px"),threshold:[.1,1]},u=new IntersectionObserver((e=>{e.forEach((e=>{var r=e.boundingClientRect.x;t.contains(document.activeElement)&&(r>s&&(null==a||a.focus()),r<s&&(null==l||l.focus())),s=r}))}),c);return u.observe(t),u}}})(b.current)};e();var t=e=>{var t,r=null==e||null===(t=e.detail)||void 0===t?void 0:t.isFollowing;C((e=>fe(fe({},e),{},{isFollowing:r})))};return document.addEventListener(h,t),window.addEventListener("resize",e),k(!0),()=>{window.removeEventListener("resize",e),document.removeEventListener(h,t),w.current&&w.current.disconnect()}}),[]),(0,n.useEffect)((()=>{if(!j&&O&&!(e=>{for(var{element:t,elementId:r,ariaLabelText:n,maxSearchLevels:o=7}=e,i=t,a=0;i&&a<o;){if(i.tagName&&"button"===i.tagName.toLowerCase()&&(i.id===r||i.getAttribute("aria-label")===n))return!0;i=i.parentElement,a+=1}return!1})({element:x.current,ariaLabelText:"Quick User Actions Menu for ".concat(a),maxSearchLevels:5})){var e=b.current.querySelector("button");if(!e)return;e.focus()}T(j)}),[j]),(0,n.useEffect)((()=>{C(l)}),[l]),(0,P.jsxs)(we,{"data-testid":"quick-user-actions-menu-wrapper",isSelected:j,ref:b,bottom:c,children:[(0,P.jsx)(d.C,{tracking:H,trackView:!1,stopPropagation:!0,children:e=>{var{trackRef:t}=e;return(0,P.jsx)("div",{ref:t,children:(0,P.jsx)(u.A,{"aria-label":"Quick User Actions Menu for ".concat(a),width:"content-length",emphasis:"low",children:" ",iconType:"actions:more-horizontal",iconPosition:"end",iconOnly:"true",onClick:_,role:"button",disabled:!A,trackRef:y,cornerFit:!0})})}}),j&&(0,o.createPortal)((0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(ye,{$isTouchEnabledLT900:(t=window.innerWidth,r="ontouchstart"in window||navigator.maxTouchPoints>0,i=ge(t,r),Boolean(null==i?void 0:i.touchModalDesignSmall))}),(0,P.jsx)(Pe,{menuRef:f,buttonWrapperStyledDivRef:b,title:a,buttonHandler:_,setUasModalShow:S,service:s,minHeight:g,personalisedActions:E,setPersonalisedActionsState:C,tracking:L,resourceId:h,renderDialogContent:m})]}),document.getElementById("root"))]})}},99087:(e,t,r)=>{r.d(t,{P:()=>s}),r(63696);var n=r(2396),o=r(62540);function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){l(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var s=e=>{var{promo:t}=e;return t.personalisedActions?a(a({},t),{},{buttonSlot:(0,o.jsx)(n.Ay,{personalisedActions:t.personalisedActions,service:t.service,title:t.headline,tracking:t.tracking,resourceId:t.personalisedActions.tleoId})}):t}}}]);